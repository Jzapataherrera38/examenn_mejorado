{"ast":null,"code":"import axios from 'axios';\nimport PreView from '@/components/PreView.vue';\nimport ManagerPregunta from '@/components/interfaz/ManagerPregunta.vue';\nexport default {\n  components: {\n    PreView,\n    ManagerPregunta\n  },\n  data: () => ({\n    btnge: true,\n    alerta: false,\n    texto: '',\n    vertical: true,\n    menu: false,\n    menu2: false,\n    menu3: false,\n    tab: null,\n    npreguntas: 0,\n    nopciones: '',\n    valid: false,\n    color: 'red',\n    loading4: false,\n    loader: null,\n    CampoRules: [v => !!v || 'Campo requerido'],\n    examen: {\n      fecha_inicio: '',\n      fecha_cierre: '',\n      tema: '',\n      no_preguntas: '',\n      preguntas: []\n    },\n    overlay: false\n  }),\n  methods: {\n    Rpreguntas(preguntas) {\n      this.examen.preguntas = preguntas;\n    },\n\n    async guardarexamen() {\n      if (this.$refs.form[0].validate()) {\n        if (this.examen.no_preguntas == this.examen.preguntas.length) {\n          this.loading4 = true;\n          var vm = this;\n          await axios.post(\"http://localhost:3000/examen\", this.examen).then(function (res) {\n            if (res.status == 201) {\n              vm.color = 'blue';\n              vm.alerta = true;\n              vm.texto = 'El examen ha sido guardado exitosamente ...';\n            }\n          }).catch(function (error) {\n            vm.color = 'red';\n            vm.alerta = true;\n            vm.texto = `Error : ${error}`;\n          }).finally(function () {\n            vm.loading4 = false;\n          });\n        } else {\n          this.alerta = true;\n          this.texto = 'El numero de preguntas digitas no coincide con el total de las preguntas del examen';\n        }\n      }\n      /*    if (this.examen.fecha_inicio =='' ){\r\n                  this.texto = 'Debe digitar una fecha de inicio'\r\n                   return this.alerta=true \r\n            }*/\n      //   if (this.pre_nu > this.examen.no_preguntas){\n      //  const res =  await axios.post(\"http://localhost:3000/examen\",this.examen);\n      //  console.log(res);\n      //  location.reload()\n\n    },\n\n    limpiar() {\n      /*         this.examen.fecha_inicio=''\r\n              this.examen.fecha_cierre=''\r\n              this.examen.tema=''\r\n              this.npreguntas='' */\n      this.pregunta.enunciado = '';\n      this.pregunta.opciones = [];\n      this.pregunta.correcta = '';\n      this.nopciones = '';\n    }\n\n  },\n  watch: {\n    nopciones(nueva) {\n      if (nueva > 1) {\n        this.pregunta.opciones.splice(nueva, this.pregunta.opciones.length);\n        this.pregunta.correcta = 0;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA0QA;AACA;AACA;AAEA;EACAA;IACAC,OADA;IAEAC;EAFA,CADA;EAMAC;IAEAC,WAFA;IAGAC,aAHA;IAIAC,SAJA;IAKAC,cALA;IAMAC,WANA;IAOAC,YAPA;IAQAC,YARA;IASAC,SATA;IAUAC,aAVA;IAWAC,aAXA;IAYAC,YAZA;IAaAC,YAbA;IAcAC,eAdA;IAeAC,YAfA;IAgBAC,aACAC,6BADA,CAhBA;IAoBAC;MACAC,gBADA;MAEAC,gBAFA;MAGAC,QAHA;MAIAC,gBAJA;MAKAC;IALA,CApBA;IA4BAC;EA5BA,EANA;EAuCAC;IAEAC;MACA;IACA,CAJA;;IAMA;MAEA;QAEA,8DACA;UACA;UACA;UACA,8DACAC,IADA,CACA;YACA,uBACA;cACAC;cACAA;cACAA;YACA;UACA,CARA,EASAC,KATA,CASA;YACAD;YACAA;YACAA;UAEA,CAdA,EAeAE,OAfA,CAeA;YACAF;UACA,CAjBA;QAmBA,CAvBA,MA0BA;UACA;UACA;QACA;MAEA;MAGA;AACA;AACA;AACA;MAEA;MACA;MAEA;MACA;;IACA,CAtDA;;IA6DAG;MACA;AACA;AACA;AACA;MACA;MACA;MACA;MACA;IACA;;EAtEA,CAvCA;EAiHAC;IACArB;MAEA,eACA;QACA;QACA;MACA;IAGA;;EAVA;AAjHA","names":["components","PreView","ManagerPregunta","data","btnge","alerta","texto","vertical","menu","menu2","menu3","tab","npreguntas","nopciones","valid","color","loading4","loader","CampoRules","v","examen","fecha_inicio","fecha_cierre","tema","no_preguntas","preguntas","overlay","methods","Rpreguntas","then","vm","catch","finally","limpiar","watch"],"sourceRoot":"src/views","sources":["CrearExamen.vue"],"sourcesContent":["<template>\r\n  <v-container class=\"fondo\">\r\n   <v-row\r\n    justify=\"center\"\r\n    align=\"center\"\r\n    class=\"mb-4 mt-3\"\r\n   >\r\n     <v-col\r\n       cols=\"6\"\r\n       class=\"fondotitulo\">\r\n       <div class=\"d-flex align-center justify-center\" style=\"height: 40px;\">\r\n        <h2> GENERAR EXAMEN</h2>\r\n      </div>\r\n       \r\n    </v-col>\r\n  </v-row>\r\n\r\n   <v-tabs\r\n      v-model=\"tab\"\r\n      show-arrows\r\n      centered\r\n      background-color=\"transparent\"\r\n      color=\"white accent-4\"\r\n      icons-and-text\r\n    >\r\n      <v-tabs-slider color=\"white accent-4\r\n      \"></v-tabs-slider>\r\n      <v-tab href=\"#tab-1\" color=\"white\">\r\n        Crear Examen\r\n        <v-icon>mdi-clipboard</v-icon>\r\n      </v-tab>\r\n\r\n      <v-tab href=\"#tab-2\">\r\n        Vista Previa\r\n        <v-icon>mdi-eye</v-icon>\r\n      </v-tab>    \r\n    </v-tabs>\r\n    <v-tabs-items\r\n    v-model=\"tab\"\r\n    >\r\n\r\n      <v-tab-item\r\n      value=\"tab-1\"\r\n      color=\"black\"\r\n      >\r\n      <v-sheet>\r\n      <v-expansion-panels popout >\r\n      <v-expansion-panel\r\n        v-for=\"(item,i) in 1\"\r\n        :key=\"i\"\r\n        class=\"mt-4 mb-4\"\r\n      >\r\n        <v-expansion-panel-header  >\r\n       <v-row justify=\"center\" >\r\n    <v-col cols=\"12\">\r\n      <h2>Configuración de Examen</h2>\r\n    </v-col>\r\n    </v-row>\r\n        </v-expansion-panel-header>\r\n        <v-expansion-panel-content >\r\n          <v-form  ref=\"form\"\r\n          v-model=\"valid\"\r\n          lazy-validation\r\n           >\r\n    <v-row align=\"center\" class=\"pr-20\" >\r\n      <v-col cols=\"2\" class=\"texto\">\r\n      Fecha Inicio:\r\n      </v-col>\r\n      <v-col cols=\"3\">\r\n        <v-menu\r\n        v-model=\"menu2\"\r\n        :close-on-content-click=\"false\"\r\n        :nudge-right=\"40\"\r\n        transition=\"scale-transition\"\r\n        offset-y\r\n        min-width=\"auto\"\r\n      >\r\n        <template v-slot:activator=\"{ on, attrs }\" >\r\n          <v-text-field\r\n            v-model=\"examen.fecha_inicio\"\r\n       \r\n            prepend-icon=\"mdi-calendar\"\r\n            readonly\r\n            :rules=\"CampoRules\"\r\n            label=\"Fecha inicial\"\r\n            required\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\"\r\n          ></v-text-field>\r\n        </template>\r\n        <v-date-picker\r\n          v-model=\"examen.fecha_inicio\"\r\n          @input=\"menu2 = false\"\r\n        ></v-date-picker>\r\n      </v-menu>\r\n      </v-col>\r\n\r\n      <v-col cols=\"2\" class=\"texto\"> \r\n        Fecha Cierre:\r\n      </v-col>\r\n      <v-col cols=\"4\" >\r\n        <v-menu \r\n        v-model=\"menu3\"\r\n        :close-on-content-click=\"false\"\r\n        :nudge-right=\"40\"\r\n        transition=\"scale-transition\"\r\n        offset-y\r\n        min-width=\"auto\"\r\n      >\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n          <v-col >\r\n          <v-text-field \r\n            v-model=\"examen.fecha_cierre\"\r\n            :rules=\"CampoRules\"\r\n            prepend-icon=\"mdi-calendar\"\r\n            label=\"Fecha cierre\"\r\n            readonly\r\n            required\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\"\r\n          ></v-text-field>\r\n        </v-col>\r\n        </template>\r\n        <v-date-picker\r\n          v-model=\"examen.fecha_cierre\"\r\n          @input=\"menu3 = false\"\r\n        ></v-date-picker>\r\n      </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row align=\"center\" class=\"pr-20\">\r\n      <v-col cols=\"2\" class=\"texto\">\r\n        Tema:\r\n      </v-col>\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-journal-plus\" viewBox=\"0 0 16 16\">\r\n        <path fill-rule=\"evenodd\" d=\"M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z\"/>\r\n        <path d=\"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z\"/>\r\n        <path d=\"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z\"/>\r\n      </svg>\r\n      <v-col cols=\"8\">\r\n        \r\n        <v-text-field\r\n        v-model=\"examen.tema\"\r\n        :rules=\"CampoRules\"\r\n        required\r\n        label=\"Digite el tema\"\r\n      ></v-text-field>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row align=\"center\" class=\"pr-20\">\r\n      <v-col cols=\"2\" class=\"texto\">\r\n        Número de preguntas: \r\n      </v-col>\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-sort-numeric-down\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z\"/>\r\n        <path fill-rule=\"evenodd\" d=\"M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z\"/>\r\n        <path d=\"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z\"/>\r\n      </svg>\r\n      <v-col cols=\"2\">\r\n        <v-text-field\r\n        v-model=\"examen.no_preguntas\"\r\n        label=\"Numero de preguntas\"\r\n        type=\"number\"\r\n        :rules=\"CampoRules\"\r\n        requerid\r\n      ></v-text-field>\r\n      </v-col>\r\n      </v-row>\r\n    </v-form>\r\n   </v-expansion-panel-content>\r\n  </v-expansion-panel>\r\n</v-expansion-panels>\r\n\r\n        <v-expansion-panels popout >\r\n            <v-expansion-panel\r\n              v-for=\"(item,i) in 1\"\r\n              :key=\"i\"\r\n            >\r\n              <v-expansion-panel-header >\r\n                \r\n          <v-row justify=\"center\">\r\n            <v-col cols=\"12\">\r\n              <h2>Configuración de Preguntas</h2>\r\n            </v-col>\r\n          </v-row>\r\n              </v-expansion-panel-header>\r\n\r\n              <ManagerPregunta\r\n                     :npreguntas=\"examen.no_preguntas\"\r\n                     :preguntas=\"examen.preguntas\"\r\n                     @Evdatos=\"Rpreguntas\"\r\n                   >\r\n             </ManagerPregunta>\r\n             \r\n      </v-expansion-panel>\r\n    </v-expansion-panels>\r\n    <v-bottom-navigation >\r\n      \r\n      <v-btn @click=\"guardarexamen()\"\r\n      :loading=\"loading4\"\r\n      :disabled=\"loading4\"\r\n       >\r\n        <span>GUARDAR EXAMEN</span>\r\n        <template v-slot:loader>\r\n          <span class=\"custom-loader\">\r\n            <v-icon light>mdi-cached</v-icon>\r\n          </span>\r\n        </template>\r\n  \r\n        <v-icon>mdi-floppy</v-icon>\r\n      </v-btn>\r\n    </v-bottom-navigation>\r\n\r\n\r\n<v-overlay :value=\"overlay\">\r\n      <v-progress-circular\r\n        indeterminate\r\n        size=\"64\"\r\n      ></v-progress-circular>\r\n    </v-overlay>\r\n\r\n\r\n\r\n    <!--Llene datos-->\r\n    <template >\r\n      <div class=\"text-center\" >\r\n        <v-snackbar  :color=\"color\"\r\n          v-model=\"alerta\"\r\n          :vertical=\"vertical\"\r\n        >\r\n          {{ texto }}\r\n    \r\n          <template v-slot:action=\"{ attrs }\">\r\n            <v-btn\r\n              color=\"indigo\"\r\n              text\r\n              v-bind=\"attrs\"\r\n              @click=\"alerta = false\"\r\n            >\r\n              Close\r\n            </v-btn>\r\n          </template>\r\n        </v-snackbar>\r\n      </div>\r\n    </template>\r\n\r\n</v-sheet>\r\n</v-tab-item>\r\n<v-tab-item\r\n      value=\"tab-2\"\r\n      >\r\n      <PreView\r\n        :examen=\"examen\"\r\n      ></PreView>\r\n\r\n</v-tab-item>\r\n\r\n</v-tabs-items>\r\n\r\n</v-container>\r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport PreView from '@/components/PreView.vue'\r\nimport ManagerPregunta from '@/components/interfaz/ManagerPregunta.vue'  \r\n\r\n  export default {\r\n    components:{\r\n       PreView,\r\n       ManagerPregunta\r\n        },\r\n\r\n    data: () => ({\r\n     \r\n      btnge: true,\r\n      alerta: false,\r\n      texto : '',\r\n      vertical: true,\r\n      menu: false,\r\n      menu2 : false,\r\n      menu3 : false,\r\n      tab : null,\r\n      npreguntas : 0,\r\n      nopciones : '',\r\n      valid: false,\r\n      color : 'red',\r\n      loading4: false,\r\n      loader: null,\r\n      CampoRules: [\r\n        v => !!v || 'Campo requerido',\r\n      ],\r\n\r\n      examen:{\r\n        fecha_inicio : '',\r\n        fecha_cierre: '',\r\n        tema : '',\r\n        no_preguntas : '',\r\n        preguntas : [],\r\n\r\n      },\r\n      overlay:false,\r\n     \r\n     \r\n    \r\n    }),\r\n    methods: {\r\n     \r\n    Rpreguntas(preguntas){\r\n       this.examen.preguntas = preguntas\r\n    },\r\n\r\n     async guardarexamen(){\r\n      \r\n      if (this.$refs.form[0].validate()) {\r\n              \r\n         if (this.examen.no_preguntas == this.examen.preguntas.length)\r\n         {\r\n          this.loading4 = true\r\n           var vm = this\r\n            await axios.post(\"http://localhost:3000/examen\",this.examen)\r\n            .then(function (res) {\r\n              if (res.status == 201)\r\n             {\r\n               vm.color = 'blue'\r\n               vm.alerta = true\r\n               vm.texto = 'El examen ha sido guardado exitosamente ...'\r\n             }\r\n            })\r\n            .catch(function (error) {\r\n              vm.color = 'red'\r\n               vm.alerta = true\r\n               vm.texto = `Error : ${error}`\r\n   \r\n            })\r\n            .finally(function () {\r\n               vm.loading4 = false\r\n               });\r\n           \r\n         }\r\n         \r\n         else\r\n         {\r\n           this.alerta = true\r\n           this.texto = 'El numero de preguntas digitas no coincide con el total de las preguntas del examen'\r\n         }\r\n\r\n      }\r\n      \r\n\r\n          /*    if (this.examen.fecha_inicio =='' ){\r\n                      this.texto = 'Debe digitar una fecha de inicio'\r\n                       return this.alerta=true \r\n                }*/\r\n       \r\n     //   if (this.pre_nu > this.examen.no_preguntas){\r\n     //  const res =  await axios.post(\"http://localhost:3000/examen\",this.examen);\r\n\r\n     //  console.log(res);\r\n     //  location.reload()\r\n        },\r\n\r\n      \r\n\r\n\r\n    \r\n\r\n      limpiar(){\r\n/*         this.examen.fecha_inicio=''\r\n        this.examen.fecha_cierre=''\r\n        this.examen.tema=''\r\n        this.npreguntas='' */\r\n        this.pregunta.enunciado = '';\r\n        this.pregunta.opciones = [];\r\n        this.pregunta.correcta = '';\r\n        this.nopciones = '';\r\n      },\r\n      \r\n     \r\n    },\r\n    watch: {\r\n      nopciones(nueva){\r\n      \r\n           if (nueva > 1)\r\n            {\r\n              this.pregunta.opciones.splice(nueva,this.pregunta.opciones.length )\r\n              this.pregunta.correcta = 0;\r\n            }\r\n    \r\n           \r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n\r\n.fondotitulo{\r\n  background: linear-gradient(90deg, rgba(243,242,248,0.49352240896358546) 16%, rgba(173,173,184,0.364670868347339) 40%, rgba(180,229,239,0.4375) 83%);justify-content: center;\r\n color : white\r\n\r\n}\r\n.fondo{\r\n  background: linear-gradient(90deg, rgba(30,171,38,0.8688725490196079) 18%, rgba(98,188,38,0.8464635854341737) 53%, rgba(135,180,85,0.9332983193277311) 95%);\r\n}\r\n.custom-loader {\r\n  animation: loader 1s infinite;\r\n  display: flex;\r\n}\r\n@-moz-keyframes loader {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@-webkit-keyframes loader {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@-o-keyframes loader {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n@keyframes loader {\r\n  from {\r\n    transform: rotate(0);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.mostrar{\r\n  background-color: #00C853;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}